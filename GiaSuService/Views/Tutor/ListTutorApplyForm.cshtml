@using GiaSuService.Configs;
@using GiaSuService.Models.TutorViewModel;
@model IEnumerable<TutorApplyFormViewModel>

<div class="container">
    <h1 class="h3">Danh sách các đơn đã ứng tuyển</h1>

    <div class="row">
        <div class="col-md-12">
            <ul class="list-group">
                @foreach (var item in Model)
                {
                    <li class="list-group-item d-flex m-3">
                        <div class="row w-100">
                            <div class="col-md-9">
                                <h5 class="mb-1">@item.SubjectName - @item.GradeName</h5>

                                <small>Request ID: @item.RequestId</small> @* Chính thức phải ẩn cái này đi *@

                                <p class="mb-1">Expired date: @item.ExpiredDate</p>

                                <p class="mb-1">Students: @item.Students</p>

                                @if (!string.IsNullOrEmpty(item.AdditionalDetail))
                                {
                                    <p class="mt-3 mb-0">Additional Details: @item.AdditionalDetail</p>
                                }
                                else
                                {
                                    <p class="mt-3 mb-0">Additional Details: Không có</p>
                                }
                            </div>
                            <div class="col-md-3 row">
                                <div class="col-md-7 d-flex justify-content-center align-items-center">
                                    <a href="@Url.Action("TutorRequestProfile", "Tutor", new{requestId = item.RequestId, queueStatus = item.StatusName})" 
                                    class="btn btn-sm btn-outline-primary me-2">Details</a>
                                    
                                    
                                    @* @if (item.StatusName == AppConfig.QueueStatus.PENDING.ToString().ToLower() ||
                                         item.StatusName == AppConfig.QueueStatus.APPROVAL.ToString().ToLower())
                                    {
                                        <a href="@Url.Action("CancelApplyRequest", "Tutor", new{requestId = item.RequestId})" class="btn btn-sm btn-outline-primary me-2">Cancel</a>
                                    } *@
                                   
                                </div>
                                <div class="col-md-5 d-flex justify-content-end align-items-center">
                                    @if (item.StatusName == AppConfig.QueueStatus.DENY.ToString().ToLower() ||
                                        item.StatusName == AppConfig.QueueStatus.CANCEL.ToString().ToLower())
                                    {
                                        <span class="badge bg-danger rounded-pill ms-auto">@item.StatusName</span>
                                    }
                                    @if (item.StatusName == AppConfig.QueueStatus.PENDING.ToString().ToLower())
                                    {
                                        <span class="badge bg-info rounded-pill ms-auto">@item.StatusName</span>
                                    }
                                    @if (item.StatusName == AppConfig.QueueStatus.APPROVAL.ToString().ToLower())
                                    {
                                        <span class="badge bg-success rounded-pill ms-auto">@item.StatusName</span>
                                    }
                                </div>
                            </div>
                        </div>
                    </li>
                }
            </ul>
        </div>
    </div>
</div>