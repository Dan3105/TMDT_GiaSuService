@using GiaSuService.Models.TutorViewModel


@model FormRegisterTutorRequestViewModel
<form asp-action="RegisterFormTutorPost" asp-controller="Identity" method="post">

 

    <div class="form-group">
        <label for="fullName">Họ và tên:</label>
        <input type="text" class="form-control" id="fullName" placeholder="Nhập tên đầy đủ của bạn" asp-for="AccountProfile!.FullName">
        @Html.ValidationMessageFor(model => model.AccountProfile!.FullName, "", new { @class = "text-danger" })
    </div>
    <div class="form-group">
        <label for="birthDate">Ngày sinh:</label>
        <input type="date" class="form-control" id="birthDate" asp-for="AccountProfile!.BirthDate">
        @Html.ValidationMessageFor(model => model.AccountProfile!.BirthDate, "", new { @class = "text-danger" })
    </div>
    <div class="form-select">
        <label for="province">Tỉnh:</label>
        <select class="form-select" id="province" onchange="getDistricts()">
            @if (Model.ListProvince != null)
            {
                <option id="provincedefault">-- Chọn tỉnh --</option>
                @foreach (var province in Model.ListProvince)
                {
                    <option value="@province.ProvinceId">@province.ProvinceName</option>
                }
            }
        </select>
    </div>
    <div class="form-group">
        <label for="email">Email:</label>
        <input type="email" class="form-control" id="email" placeholder="Nhập địa chỉ email của bạn" asp-for="AccountProfile!.Email">
        @Html.ValidationMessageFor(model => model.AccountProfile!.Email, "", new { @class = "text-danger" })
    </div>
    <div class="form-group">
        <label for="phone">Số điện thoại:</label>
        <input type="tel" class="form-control" id="phone" placeholder="Nhập số điện thoại của bạn" asp-for="AccountProfile!.Phone">
        @Html.ValidationMessageFor(model => model.AccountProfile!.Phone, "", new { @class = "text-danger" })
    </div>
    <div class="form-group">
        <label for="password">Mật khẩu:</label>
        <input type="password" class="form-control" id="password" placeholder="Nhập mật khẩu của bạn" asp-for="AccountProfile!.Password">
        @Html.ValidationMessageFor(model => model.AccountProfile!.Password, "", new { @class = "text-danger" })
    </div>
    <div class="form-group">
        <label for="confirmPassword">Xác nhận lại mật khẩu:</label>
        <input type="password" class="form-control" id="confirmPassword" placeholder="Nhập lại mật khẩu" asp-for="AccountProfile!.ConfirmPassword">
        @Html.ValidationMessageFor(model => model.AccountProfile!.ConfirmPassword, "", new { @class = "text-danger" })
    </div>
    <div class="form-group">
        <label for="identityCard">CCCD/CMND:</label>
        <input type="text" class="form-control" id="identityCard" placeholder="Nhập số căn cước của bạn" asp-for="AccountProfile!.IdentityCard">
        @Html.ValidationMessageFor(model => model.AccountProfile!.IdentityCard, "", new { @class = "text-danger" })
    </div>
    <div class="form-group">
        <label for="gender">Giới tính:</label>
        <select class="form-control" id="gender" asp-for="AccountProfile!.Gender">
            <option value="Nam">Nam</option>
            <option value="Nữ">Nữ</option>
        </select>
        @Html.ValidationMessageFor(model => model.AccountProfile!.Gender, "", new { @class = "text-danger" })
    </div>
    <div class="form-group">
        <label for="logoAccount">Logo Account:</label>
        <input type="text" class="form-control" id="logoAccount" placeholder="Enter logo account (text only)" asp-for="AccountProfile!.LogoAccount">
        @Html.ValidationMessageFor(model => model.AccountProfile!.LogoAccount, "", new { @class = "text-danger" })
    </div>

    <div class="form-select">
        <label for="districtSelectionContainer">Quận:</label>
        <select id="districtSelectionContainer" asp-for="AccountProfile!.SelectedDistrictId">
            <option value="">-- Select District --</option>
        </select>
    </div>
    <div class="form-group m-2">
        <label for="addressName">Address Name:</label>
        <input type="text" class="form-control" id="addressName" placeholder="Enter logo account (text only)" asp-for="AccountProfile!.AddressName">
        @Html.ValidationMessageFor(model => model.AccountProfile!.AddressName, "", new { @class = "text-danger" })
    </div>

    <div class="form-group m-2">
        <label for="addressName">College Name:</label>
        <input type="text" class="form-control" id="collegeName" placeholder="Enter logo account (text only)" asp-for="RegisterTutorProfile!.College">
        @Html.ValidationMessageFor(model => model.RegisterTutorProfile!.College, "", new { @class = "text-danger" })
    </div>

    <div class="form-group m-2">
        <label for="addressName">Area Name:</label>
        <input type="text" class="form-control" id="areaName" placeholder="Enter logo account (text only)" asp-for="RegisterTutorProfile!.Area">
        @Html.ValidationMessageFor(model => model.RegisterTutorProfile!.Area, "", new { @class = "text-danger" })
    </div>

    <div class="form-group m-2">
        <label for="addressName">Nghề nghiệp hiện tại:</label>
        <input type="text" class="form-control" id="statusName" placeholder="Công việc hiện tại" asp-for="RegisterTutorProfile!.CurrentStatus">
        @Html.ValidationMessageFor(model => model.RegisterTutorProfile!.CurrentStatus, "", new { @class = "text-danger" })
    </div>

    <div class="form-group m-2">
        <label for="addressName">Thông tin thêm:</label>
        <input type="text" class="form-control" id="additionalName" placeholder="Ghi chú" asp-for="RegisterTutorProfile!.AdditionalInfo">
        @Html.ValidationMessageFor(model => model.RegisterTutorProfile!.AdditionalInfo, "", new { @class = "text-danger" })
    </div>

    <div>
        <label>Niên khóa:</label>
        <div>
            <label asp-for="RegisterTutorProfile!.AcademicYearFrom">Từ năm:</label>
            <input type="number" asp-for="RegisterTutorProfile!.AcademicYearFrom" class="form-control" required>
            <span asp-validation-for="RegisterTutorProfile!.AcademicYearFrom" class="text-danger"></span>
        </div>
        <div>
            <label asp-for="RegisterTutorProfile!.AcademicYearto">Đến năm:</label>
            <input type="number" asp-for="RegisterTutorProfile!.AcademicYearto" class="form-control" required>
            <span class="error-message"></span>
        </div>
    </div>

    <div class="form-group">
        <label>Thời gian có thể dạy:</label>
        <div class="row row-cols-3">
            @for (int i = 0; i < Model.ListSessionDate.Count(); i++)
            {
                <div class="checkbox">
                    <label>
                        @Html.HiddenFor(m => m.ListSessionDate[i].SessionId)
                        @Html.CheckBoxFor(m => m.ListSessionDate[i].IsChecked)
                        @Model.ListSessionDate[i].SessionName
                    </label>
                </div>
            }
        </div>
    </div>

    <div class="form-group">
        <label>Môn học có thể dạy:</label>
        <div class="row row-cols-3">
            @for (int i = 0; i < Model.ListSubject.Count(); i++)
            {
                <div class="checkbox">
                    <label>
                        @Html.HiddenFor(m => m.ListSubject[i].SubjectId)
                        @Html.CheckBoxFor(m => m.ListSubject[i].IsChecked)
                        @Model.ListSubject[i].SubjectName
                    </label>
                </div>
            }
        </div>
    </div>

    <div class="form-group">
        <label>Khối lớp có thể dạy:</label>
        <div class="row row-cols-3">
            @for (int i = 0; i < Model.ListGrade.Count(); i++)
            {
                <div class="checkbox">
                    <label>
                        @Html.HiddenFor(m => m.ListGrade[i].GradeId)
                        @Html.CheckBoxFor(m => m.ListGrade[i].IsChecked)
                        @Model.ListGrade[i].GradeName
                    </label>
                </div>
            }
        </div>
    </div>

    <div class="form-group">
        <label>Khu vực có thể dạy:</label>
        <div class="row row-cols-3" id="districtCheckBoxes">
            
        </div>
    </div>
    <hr />
    <button type="submit" class="btn btn-primary">Register</button>
</form>

@section scripts {
    <script>
        function getDistricts() {
            $("#provincedefault").remove();

            var selectedIdProvince = $("#province").val();
            $.ajax({
                url: `/Identity/Districts`,
                type: 'GET',
                dataType: "json",
                data: { 'provinceId': selectedIdProvince },
                success: function (data) {

                    $("#districtSelectionContainer").empty(); // Replace the content with updated data
                    //$("#districtCheckBoxes").empty();

                    for (var i = 0; i < data.length; i++) {
                        $("#districtSelectionContainer").append($('<option></option>').val(data[i].districtId).text(data[i].districtName));
                        var item = data[i];
                        var checkbox = `<input class="form-check-input" 
                                        type="checkbox"
                                                name="ListDistrict[]"
                                                id="checkbox_district_${item.districtId}"
                                                value="${item.districtId}" ${item.isCheck ? "checked" : ""}/>`;

                        $("#districtCheckBoxes").append(`<div class="checkbox"><label> ${checkbox} ${item.districtName} </label> <div />`);

                    }
                }
            });
        }
    </script>
}
